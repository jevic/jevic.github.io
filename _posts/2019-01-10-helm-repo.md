---
layout: post
categories: Kubernetes
title: helm 私有仓库
date: 2019-01-10 20:35:46 +0800
description: Docker,kubernetes,k8s
keywords: Docker,k8s
---

>helm 私有本地仓库配置

关于helm 安装配置参考[Kubernetes helm 包管理工具](https://www.jevic.cn/2018/10/13/helm/)

#### 开启服务

``` bash
mkdir /opt/helm/charts
helm serve --address helm.jevic.cn:8879 --repo-path /opt/helm/charts &>/dev/null &
```

#### 添加仓库: 

``` bash
helm repo add jevic http://hub.jevic.cn:8879
```

查看仓库列表

``` bash
helm repo list

NAME     	URL
local    	http://127.0.0.1:8879
incubator	https://aliacs-app-catalog.oss-cn-hangzhou.aliyuncs.com/charts-incubator/
stable   	https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts
aliyun   	https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts-incubator/
jevic    	http://helm.jevic.cn:8879
```

#### 应用上传

``` bash

## 打包应用
cp -r demoapp /opt/helm/charts
cd /opt/helm/charts
helm package demoapp --save=false
## 更新索引
cd /opt/helm/charts
helm repo index --url=http://helm.jevic.cn:8879 .
helm repo update
```
#### 部署

``` bash
## search
helm search demo

NAME         	CHART VERSION	APP VERSION	DESCRIPTION
jevic/demoapp	0.3.0        	1.0        	A Helm chart DemoApp for Kubernetes


## install
helm install -n appv3 jevic/demoapp

## get pods
kubectl get pods |grep appv3

appv3-demoapp-79b7f754d5-zbkvd                   1/1     Running   0          91s

## list 
helm ls 
```
